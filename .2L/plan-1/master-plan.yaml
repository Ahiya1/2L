plan_id: plan-1
created_at: 2025-10-03T02:40:00Z
status: PLANNED
total_iterations: 3

strategy: |
  Meta-programming approach: Use 2L to improve 2L itself.

  Foundation-first strategy: Start with observability (dashboard + events) to monitor
  subsequent improvements. This provides real-time visibility into iterations 2 & 3.

  Sequential execution: Run iterations in order to validate each subsystem before
  building on it. Dashboard foundation enables monitoring of MCP cleanup and advanced
  orchestration changes.

  Risk mitigation: All changes must maintain backward compatibility with existing plans.
  Test resume functionality after each iteration.

  Integration points managed carefully:
  - commands/2l-mvp.md modified in iterations 1 & 3 (different sections)
  - agents/2l-healer.md modified in iterations 2 & 3 (different sections)
  - Event logging from iteration 1 used optionally by iterations 2 & 3

  Total estimated time: 17-24 hours across 3 iterations

iterations:
  - iteration_id: 1
    global_iteration: 1
    name: "Dashboard Foundation - Observability Infrastructure"
    vision: "Establish real-time visibility into 2L orchestration with event logging system and live HTML dashboard"
    scope: |
      Build complete dashboard infrastructure:

      **New files to create:**
      - lib/2l-event-logger.sh - Bash helper with log_2l_event() function
      - agents/2l-dashboard-builder.md - Agent that generates dashboard HTML
      - .2L/dashboard/index.html - Self-contained dashboard (generated by agent)

      **Files to modify:**
      - commands/2l-mvp.md:
        * Add dashboard initialization (check if exists, spawn builder if not)
        * Source event logger library
        * Add event logging calls at all orchestration checkpoints:
          - plan_start, iteration_start, phase_change
          - agent_spawn, agent_complete
          - validation_result, iteration_complete
          - cost_update (periodic)

      **Features:**
      - Single HTML file dashboard (<500 lines, inline CSS/JS)
      - Polls .2L/events.jsonl every 2 seconds
      - Displays: header, metrics bar, active agents, MCP status, event log
      - Multi-project support via file:// protocol
      - Dark theme, mobile-friendly

      **Success criteria:**
      - Dashboard auto-creates on first /2l-mvp run
      - Events stream to .2L/events.jsonl in real-time
      - Dashboard updates showing active agents, cost, events
      - Multi-project isolation works (separate events per project)
      - No breaking changes to existing orchestration
    status: COMPLETE
    complexity: HIGH
    risk: MEDIUM
    estimated_hours: 6-8
    completed_at: "2025-10-03T02:55:00Z"
    validation_status: PASS
    dependencies: []

  - iteration_id: 2
    global_iteration: 2
    name: "Reliability & Standards - MCP Cleanup + Honest Validation"
    vision: "Clean up broken MCP integrations and implement honest uncertainty reporting to eliminate false failures and false positives"
    scope: |
      Clean and standardize MCP integrations + add validation honesty:

      **MCP Cleanup (6 agent files):**
      - Remove ALL GitHub MCP references (authentication broken)
      - Remove ALL Screenshot MCP references (platform incompatible)
      - Standardize to 3 working MCPs:
        * Playwright MCP - E2E testing, browser automation
        * Chrome DevTools MCP - Performance profiling, debugging
        * Supabase Local MCP - Database validation (PostgreSQL)
      - Add "optional, skip gracefully if unavailable" guidance

      **Files to modify for MCP cleanup:**
      - agents/2l-validator.md - Clean MCP section, add graceful skip
      - agents/2l-builder.md - Standardize MCP section
      - agents/2l-healer.md - Standardize MCP section
      - agents/2l-planner.md - Add MCP patterns generation to patterns.md
      - commands/2l-task.md - Update MCP references
      - commands/2l-mvp.md - Update MCP availability comments

      **Honest Validation (2 validator files):**
      - Add "Reporting Standards: Honesty Over Optimism" section
      - Implement 80% confidence rule:
        * If <80% confident in PASS → report UNCERTAIN or PARTIAL
      - Add new statuses: PASS, UNCERTAIN, PARTIAL, INCOMPLETE, FAIL
      - Provide examples of honest vs optimistic reporting
      - Update report templates with confidence levels

      **Files to modify for honesty:**
      - agents/2l-validator.md - Add honesty guidance + confidence framework
      - agents/2l-ivalidator.md - Add honest cohesion assessment

      **Success criteria:**
      - Zero GitHub/Screenshot MCP references anywhere
      - Exactly 3 MCPs consistently mentioned across all agents
      - Validators report confidence levels and uncertainty
      - No confusing MCP errors during validation
      - Validation reports include UNCERTAIN/PARTIAL statuses where appropriate
      - All changes backward compatible
    status: COMPLETE
    complexity: MEDIUM
    risk: LOW
    estimated_hours: 5-7
    completed_at: "2025-10-03T03:10:00Z"
    validation_status: PASS
    confidence: 95%
    dependencies: []

  - iteration_id: 3
    global_iteration: 3
    name: "Advanced Orchestration - Healing Exploration + Master Explorer Scaling"
    vision: "Add intelligent healing with root cause exploration phase and scale master explorers to 2-4 based on project complexity"
    scope: |
      Enhance healing workflow and expand master exploration capabilities:

      **Healing Exploration Phase:**
      - Add Phase 6.1 to commands/2l-mvp.md (before Phase 6.2 healing)
      - Create healing-{N}/exploration/ directory structure
      - Spawn 1-2 healing explorers to analyze validation failures:
        * Explorer 1: Root cause analysis (always spawned)
          - Categorize failures
          - Identify root causes vs symptoms
          - Map affected files
          - Recommend fix strategies
          - Identify failure dependencies
        * Explorer 2: Integration & dependency analysis (if >3 failure categories)
          - Inter-category dependencies
          - Conflict risks between fixes
          - Recommended healing order
      - Update agents/2l-healer.md to read exploration reports
      - Healers receive both validation report + exploration insights
      - New healing flow: explore → heal → validate

      **Master Explorer Expansion:**
      - Add Explorer 3 & 4 definitions to agents/2l-master-explorer.md:
        * Explorer 3: User Experience & Integration Points
          - Frontend/backend integration
          - User flow dependencies
          - External API integrations
          - Data flow patterns
        * Explorer 4: Scalability & Performance Considerations
          - Performance bottlenecks
          - Scalability concerns
          - Infrastructure needs
          - Deployment complexity
      - Implement adaptive spawning logic:
        * <5 features → 2 explorers (simple)
        * <15 features + <3 integrations → 3 explorers (medium)
        * Otherwise → 4 explorers (complex/very complex)
      - Add spawning logic to commands/2l-mvp.md and commands/2l-plan.md
      - Update commands/2l-continue.md resume detection for 2-4 explorers
      - Update config.yaml to track master_exploration.num_explorers
      - Update master plan synthesis to use all available reports

      **Files to modify:**
      - commands/2l-mvp.md - Healing exploration phase + adaptive master explorers
      - agents/2l-healer.md - Read exploration reports as input
      - agents/2l-master-explorer.md - Add Explorer 3 & 4 definitions
      - commands/2l-plan.md - Adaptive master explorer spawning
      - commands/2l-continue.md - Resume detection for 2-4 explorers

      **Success criteria:**
      - Healing spawns explorers before healers
      - Explorer 1 always runs, Explorer 2 conditional on complexity
      - Healers receive and use exploration reports for fix strategies
      - Simple visions spawn 2 master explorers
      - Medium visions spawn 3 master explorers
      - Complex visions spawn 4 master explorers
      - Resume detection works for 2-4 explorers
      - Config tracks num_explorers correctly
      - Master plan synthesis uses all explorer reports
      - No breaking changes to existing flows
    status: PENDING
    complexity: HIGH
    risk: MEDIUM
    estimated_hours: 6-8
    dependencies:
      - benefits_from_iteration_1: "Event logging for healing exploration tracking (optional)"
      - benefits_from_iteration_2: "Clean MCP references in healers"
