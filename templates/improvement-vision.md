# Vision: Fix Recurring Pattern - {PATTERN_NAME}

**Created:** {ISO_TIMESTAMP}
**Plan:** {PLAN_ID}
**Source Pattern:** {PATTERN_ID} ({OCCURRENCES} occurrences across {PROJECT_COUNT} projects)

---

## Problem Statement

**Recurring Issue:**
{PATTERN_ISSUE_DESCRIPTION}

**Evidence:**
This pattern has occurred in the following projects:
{PROJECT_LIST}

**First Discovered:** {DISCOVERED_IN}
**Severity:** {SEVERITY}
**Recurrence Risk:** {RECURRENCE_RISK}

**Root Cause:**
{PATTERN_ROOT_CAUSE}

---

## Impact Analysis

**Current State:**
This pattern has caused {OCCURRENCES} validation failure(s):
{SOURCE_LEARNINGS_LIST}

**Iteration Metrics (Average):**
- Healing rounds: {AVG_HEALING_ROUNDS}
- Files modified per fix: {AVG_FILES_MODIFIED}
- Duration per iteration: {AVG_DURATION_SECONDS}s

**Projected Improvement:**
Fixing this pattern will prevent similar failures in future iterations, reducing:
- Re-validation cycles
- Healing overhead
- Manual intervention

---

## Proposed Solution

**Implementation Strategy:**
{PATTERN_PROPOSED_SOLUTION}

**Components to Modify:**
{AFFECTED_COMPONENTS_LIST}

**Validation Strategy:**
- Verify fix prevents recurrence
- Test against historical failure scenarios
- Ensure no regression in other areas

---

## Feature Breakdown

### Must-Have (MVP)

1. **Pattern Prevention Logic**
   - Description: {SPECIFIC_IMPLEMENTATION}
   - User story: As 2L, I want to prevent {PATTERN_NAME} so that future iterations don't fail with the same issue
   - Acceptance criteria:
     - [ ] Fix implemented in affected components
     - [ ] Validation passes on test scenarios derived from historical failures
     - [ ] Pattern marked as IMPLEMENTED in global-learnings.yaml
     - [ ] No new issues introduced (regression testing)

2. **Testing & Validation**
   - Description: Ensure fix works and doesn't break existing functionality
   - Acceptance criteria:
     - [ ] Unit tests cover new prevention logic
     - [ ] Historical failure scenarios reproduced and verified fixed
     - [ ] All existing tests still pass

---

## Success Criteria

**The improvement is successful when:**

1. **Pattern No Longer Recurs**
   - Metric: Zero new instances of this pattern in next 3 iterations
   - Target: 0 occurrences
   - Verification: Monitor global-learnings.yaml in future iterations

2. **Fix Verified in Testing**
   - Metric: Re-running historical failure scenarios
   - Target: All scenarios pass
   - Verification: Validator confirms in validation report

3. **Status Updated**
   - Metric: Pattern status in global-learnings.yaml
   - Target: Status = IMPLEMENTED
   - Verification: /2l-improve updates status after /2l-mvp completes

---

## Affected Components

**Files to Modify:**
{AFFECTED_FILES_FROM_PATTERN}

**Agent/Command Modifications:**
{INFERRED_COMPONENTS_TO_MODIFY}

**Critical Safety:**
- WARNING: DO NOT modify: `commands/2l-mvp.md` (orchestrator itself - blocked for safety)
- ALLOWED: Only modify: `agents/*.md`, `commands/2l-*.md` (except 2l-mvp), `lib/*.sh`, `lib/*.py`

---

## Out of Scope

**Not included in this improvement:**
- Manual verification of fix (deferred - /2l-verify command in plan-6)
- Historical data cleanup (learnings remain for analysis)
- Other unrelated patterns (one pattern per vision for MVP)

---

## Source Data

**Pattern ID:** {PATTERN_ID}
**Discovered:** {DISCOVERED_AT}
**Source Learnings:** {SOURCE_LEARNING_IDS}

**Occurrence History:**
{OCCURRENCE_DETAILS}

---

**Vision Status:** READY_FOR_IMPLEMENTATION
**Auto-Generated:** true
**Generated By:** /2l-improve command
**Generated At:** {ISO_TIMESTAMP}
